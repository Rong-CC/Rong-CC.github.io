(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{400:function(n,s,t){"use strict";t.r(s);var a=t(54),e=Object(a.a)({},(function(){var n=this,s=n.$createElement,t=n._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h3",{attrs:{id:"生产环境去掉-console-log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生产环境去掉-console-log"}},[n._v("#")]),n._v(" 生产环境去掉 console.log")]),n._v(" "),t("p",[n._v("在main.js 中引用函数")]),n._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("export")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("function")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("rewirteLog")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("log "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("function")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[n._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("return")]),n._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[n._v("NODE_ENV")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("==")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[n._v("'development'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("?")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[n._v("log")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v(":")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),n._v("log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])])]),t("p",[n._v("方法二")]),n._v(" "),t("div",{staticClass:"language-nginx extra-class"},[t("pre",{pre:!0,attrs:{class:"language-nginx"}},[t("code",[n._v("yarn add babel-plugin-transform-remove-console -D\n")])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[n._v('\nconst plugins = ["@vue/babel-plugin-transform-vue-jsx"];\n// 生产环境移除console\nif (process.env.NODE_ENV === "production") {\n\tplugins.push("transform-remove-console");\n}\n\nmodule.exports = {\n\tplugins: plugins,\n\tpresets: ["@vue/cli-plugin-babel/preset"]\n};\n\nmodule.exports = {\n\tpresets: ["@vue/cli-plugin-babel/preset"],\n  // 生产环境移除console\n\tenv: {\n\t\tproduction: {\n\t\t\tplugins: ["transform-remove-console"]\n\t\t}\n\t}\n};\n\nconst IS_PROD = ["production","prod"].includes(process.env.NODE_ENV);\n\nconst plugins = [];\n\nmodule.exports = {\n   // 生产环境移除console\n  plugins: plugins,\n\tpresets: ["@vue/cli-plugin-babel/preset"]\n};   \n')])])]),t("p",[n._v("方法二")]),n._v(" "),t("div",{staticClass:"language-vue extra-class"},[t("pre",{pre:!0,attrs:{class:"language-vue"}},[t("code",[n._v(" chainWebpack: config => {\n    config.optimization\n      .minimizer('terser')\n      .tap(args => {\n        Object.assign(args[0].terserOptions.compress, { // 生产模式 console.log 去除\n          // warnings: false , // 默认 false\n          // drop_console:  ,\n          // drop_debugger: true, // 默认也是true \n          pure_funcs: ['console.log']\n        })\n        return args\n      })\n  }\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);